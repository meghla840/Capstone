<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nearby Hospitals</title>
<style>
  body {
    margin:0;
    font-family: Arial, sans-serif;
    background: #eaf0f3;
    display:flex;
    flex-direction:column;
    min-height:100vh;
  }

  /* NAVBAR */
  nav {
    position: sticky;
      top: 0;
      z-index: 9999;
    width:100%;
    background: rgba(75,75,113,0.85);
    position: sticky;
    padding:10px 20px;
    display:flex;
    align-items:center;
    gap:20px;
    color:white;
    flex-wrap:wrap;
  }
  nav h1 {
    flex:1;
    margin:0;
    font-size:1.5rem;
    text-align:center;
    color:white;
  }
  .back-btn {
    background:transparent;
    color:white;
    padding:5px 10px;
    border-radius:5px;
    cursor:pointer;
    border:1px solid white;
    transition:0.3s;
  }
  .back-btn:hover {
    background:white;
    color:#49465b;
  }

  /* MAP */
  #map-container {
    width:90%;
    max-width:900px;
    margin:20px auto;
    border-radius:10px;
    overflow:hidden;
    flex:1;
  }
  #map {
    width:100%;
    height:400px;
    border-radius:10px;
  }

  /* FOOTER */
  footer {
    width:100%;
    background:#49465b;
    color:white;
    padding:20px 30px;
    display:flex;
    justify-content:space-between;
    flex-wrap:wrap;
    gap:20px;
    box-sizing:border-box;
  }
  footer img { height:60px; }
  footer .foot p {
    max-width:400px;
    text-align:justify;
    font-size:0.9rem;
  }
  footer .formm {
    max-width:300px;
    flex:1;
    display:flex;
    flex-direction:column;
  }
  footer .formm textarea {
    width:100%;
    border-radius:5px;
    padding:5px;
    margin-bottom:5px;
    box-sizing:border-box;
  }
  footer .formm button {
    background:#6c6a81;
    color:white;
    border:none;
    padding:5px 10px;
    border-radius:5px;
    cursor:pointer;
  }
  footer .formm button:hover {
    background:#49465b;
  }
  footer .copyright {
    width:100%;
    text-align:center;
    margin-top:10px;
    font-size:0.8rem;
  }

  /* RESPONSIVE */
  @media (max-width:768px) {
    #map { height:300px; }
    nav h1 { font-size:1.2rem; }
    footer {
      flex-direction:column;
      align-items:center;
      text-align:center;
    }
    footer .foot, footer .formm { max-width:100%; text-align:center; }
    footer img { margin-bottom:10px; }
  }
</style>
</head>
<body>

<nav>
  <button class="back-btn" onclick="history.back()">← Back</button>
  <h1>Nearby Hospitals</h1>
</nav>

<div id="map-container">
  <div id="map"></div>
</div>

<!-- FOOTER -->
<footer>
  <div class="foot">
    <img src="images/logo.png" alt="Logo">
    <p>QuickAid provides fast, reliable, and user-friendly access to emergency health services. Whether it's locating medicine, finding a doctor, or alerting responders, we’re here when every second counts.</p>
  </div>
  <div class="formm">
    <h3>Something bothering you?</h3>
    <p>Submit your complaint below and we’ll get back to you shortly.</p>
    <form>
      <textarea placeholder="Write your complaint here..." rows="4" required></textarea>
      <button type="submit">Send</button>
    </form>
  </div>
  <div class="copyright">
    <p>Copyright &copy; 2025 QuicAid. All rights reserved.</p>
  </div>
</footer>

<script>
let map, service, userMarker;
const radius = 5000; // 5 km

function initMap() {
  map = new google.maps.Map(document.getElementById("map"), {
    zoom: 14,
    center: {lat:23.8103, lng:90.4125} // fallback Dhaka
  });

  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(position => {
      const userLoc = {lat: position.coords.latitude, lng: position.coords.longitude};
      map.setCenter(userLoc);

      userMarker = new google.maps.Marker({
        position: userLoc,
        map: map,
        title: "You are here",
        icon: "http://maps.google.com/mapfiles/ms/icons/blue-dot.png"
      });

      const request = { location: userLoc, radius: radius, type: ['hospital'] };
      service = new google.maps.places.PlacesService(map);
      service.nearbySearch(request, (results, status) => {
        if (status === google.maps.places.PlacesServiceStatus.OK) {
          results.forEach(place => {
            const marker = new google.maps.Marker({
              position: place.geometry.location,
              map: map,
              title: place.name,
              icon: "http://maps.google.com/mapfiles/ms/icons/red-pushpin.png"
            });
            const infowindow = new google.maps.InfoWindow({
              content: `<div><strong>${place.name}</strong><br>${place.vicinity}</div>`
            });
            marker.addListener('click', () => infowindow.open(map, marker));
          });
        }
      });

    }, () => alert('Geolocation failed.'));
  } else {
    alert('Browser does not support geolocation.');
  }
}
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD86sQTdR8QLar7KxxLEwaL95h63VS7bwk&libraries=places&callback=initMap" async defer></script>
</body>
</html>
