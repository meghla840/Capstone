<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Emergency Action Guide - QuickAid</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
<style>
body {
    font-family: 'Inter', sans-serif;
    margin: 0;
    background: #f5f7fa;
    color: #1f2937;
}
header {
    background: #4b4b71;
    color: white;
    text-align: center;
    padding: 25px 15px;
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}
header h1 {
    margin: 0;
    font-weight: 700;
    font-size: 2rem;
    letter-spacing: 0.5px;
}
main {
    max-width: 1200px;
    margin: 30px auto 120px auto;
    padding: 0 20px;
}
.card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px,1fr));
    gap: 25px;
}
.card {
    background: white;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 6px 18px rgba(0,0,0,0.08);
    display: flex;
    flex-direction: column;
    transition: transform 0.3s, box-shadow 0.3s;
    position: relative;
}
.card:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 24px rgba(0,0,0,0.14);
}
.card img {
    width: 100%;
    height: 160px;
    object-fit: cover;
}
.card-content {
    padding: 15px 20px;
    flex: 1;
}
.card-category {
    font-size: 0.8rem;
    font-weight: 600;
    color: #6b7280;
    margin-bottom: 6px;
}
.card-title {
    font-weight: 700;
    font-size: 1.1rem;
    margin-bottom: 6px;
    color: #111827;
}
.card-date {
    font-size: 0.75rem;
    color: #9ca3af;
    margin-bottom: 12px;
}
.card-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    border-top: 1px solid #e5e7eb;
}
.card-actions i {
    font-size: 1.2rem;
    cursor: pointer;
    color: #4b5563;
}
.card-actions i.liked { color: #ef4444; }
.card-actions i.pinned { color: #2563eb; }

/* Modal */
.modal-bg {
    display: none;
    position: fixed;
    top:0; left:0;
    width:100%; height:100%;
    background: rgba(0,0,0,0.5);
    backdrop-filter: blur(4px);
    z-index: 500;
    justify-content: center;
    align-items: center;
}
.modal {
    background: white;
    border-radius: 16px;
    max-width: 700px;
    width: 90%;
    max-height: 90%;
    overflow-y: auto;
    padding: 25px;
    position: relative;
    box-shadow: 0 8px 30px rgba(0,0,0,0.15);
}
.modal h2 {
    margin-top: 0;
    font-size: 1.6rem;
}
.modal ul {
    padding-left: 20px;
    margin-top: 12px;
}
.modal ul li {
    margin-bottom: 10px;
    line-height: 1.5;
}
.modal .close-btn {
    position: absolute;
    top: 15px;
    right: 20px;
    font-size: 1.5rem;
    cursor: pointer;
    color: #ef4444;
}

/* Footer */
footer {
    text-align: center;
    padding: 20px;
    background: #4b4b71;
    color: white;
    position: fixed;
    bottom: 0;
    width: 100%;
}

@media(max-width:768px){
    .card-grid { grid-template-columns: repeat(auto-fit, minmax(220px,1fr)); }
}
</style>
</head>
<body>

<header>
    <h1>Emergency Action Guide</h1>
</header>

<main>
    <div class="card-grid" id="cardsContainer"></div>
</main>

<!-- Modal -->
<div class="modal-bg" id="modalBg">
    <div class="modal" id="modalContent">
        <span class="close-btn" id="closeModal">&times;</span>
        <h2 id="modalTitle"></h2>
        <ul id="modalGuide"></ul>
    </div>
</div>

<footer>
    &copy; 2025 QuickAid. All rights reserved.
</footer>

<script>
// Current user
const currentUserId = "user123";

// Emergency cases with sample images
const emergencyData = [
    {id:1,title:"ভূমিকম্প",category:"Natural Disaster",date:"Aug 5, 2025",img:"/mnt/data/e9c06dd4-a04d-4bf2-a449-63bf93dd0b33.png",guide:["শান্ত থাকুন।","স্থিতিশীল জায়গায় থাকুন।","টেবিল/বেডের নিচে ঢুকে রক্ষা করুন।","দরজা/খোলা জায়গা এড়িয়ে চলুন।"]},
    {id:2,title:"আগুন",category:"Fire",date:"July 29, 2025",img:"/mnt/data/e9c06dd4-a04d-4bf2-a449-63bf93dd0b33.png",guide:["ধূমপান বন্ধ করুন।","তাড়াহুড়ো না করে বাইরে বের হোন।","আগুনের কাছাকাছি যাবেন না।","জরুরি নম্বরে কল করুন।"]},
    {id:3,title:"বিদ্যুতের শক",category:"Accident",date:"June 12, 2025",img:"/mnt/data/e9c06dd4-a04d-4bf2-a449-63bf93dd0b33.png",guide:["বিদ্যুতের সরবরাহ বন্ধ করুন।","আহত ব্যক্তিকে সরাসরি ছোঁবেন না।","প্রয়োজন হলে CPR করুন।","দ্রুত হাসপাতালে নিয়ে যান।"]},
    {id:4,title:"পানিতে ডুবে যাওয়া",category:"Accident",date:"May 20, 2025",img:"/mnt/data/e9c06dd4-a04d-4bf2-a449-63bf93dd0b33.png",guide:["আতঙ্কিত হবেন না।","রেসকিউ করার আগে নিরাপত্তা নিশ্চিত করুন।","বাঁচানো ব্যক্তিকে দ্রুত পানির বাইরে আনুন।","CPR প্রয়োগ করুন।"]}
];

// Load pin & react per user
let pins = JSON.parse(localStorage.getItem(`pins_${currentUserId}`)||"[]");
let likes = JSON.parse(localStorage.getItem(`likes_${currentUserId}`)||"[]");

function renderCards(){
    const container = document.getElementById("cardsContainer");
    container.innerHTML = "";
    const sortedData = [...emergencyData].sort((a,b)=>{
        const aPinned = pins.includes(a.id);
        const bPinned = pins.includes(b.id);
        return (bPinned - aPinned);
    });
    sortedData.forEach(item=>{
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
            <img src="${item.img}" alt="${item.title}">
            <div class="card-content">
                <div class="card-category">${item.category}</div>
                <div class="card-title">${item.title}</div>
                <div class="card-date">${item.date}</div>
            </div>
            <div class="card-actions">
                <i class="bi bi-pin-fill ${pins.includes(item.id)?'pinned':''}" data-id="${item.id}" title="Pin/Unpin"></i>
                <i class="bi bi-heart-fill ${likes.includes(item.id)?'liked':''}" data-id="${item.id}" title="Like/Unlike"></i>
            </div>
        `;
        // Card click for modal
        card.addEventListener("click",(e)=>{
            if(!e.target.classList.contains("bi")){
                document.getElementById("modalTitle").innerText = item.title;
                const ul = document.getElementById("modalGuide");
                ul.innerHTML = "";
                item.guide.forEach(step=>{
                    const li = document.createElement("li");
                    li.textContent = step;
                    ul.appendChild(li);
                });
                document.getElementById("modalBg").style.display="flex";
            }
        });
        // Pin
        card.querySelector(".bi-pin-fill").addEventListener("click",(e)=>{
            e.stopPropagation();
            const id = item.id;
            if(pins.includes(id)) pins = pins.filter(x=>x!==id);
            else pins.push(id);
            localStorage.setItem(`pins_${currentUserId}`,JSON.stringify(pins));
            renderCards();
        });
        // Like
        card.querySelector(".bi-heart-fill").addEventListener("click",(e)=>{
            e.stopPropagation();
            const id = item.id;
            if(likes.includes(id)) likes = likes.filter(x=>x!==id);
            else likes.push(id);
            localStorage.setItem(`likes_${currentUserId}`,JSON.stringify(likes));
            renderCards();
        });
        container.appendChild(card);
    });
}

renderCards();

// Modal close
document.getElementById("closeModal").addEventListener("click",()=>{
    document.getElementById("modalBg").style.display="none";
});
</script>

</body>
</html>
